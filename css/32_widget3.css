.w3ToolsRow{
  display:flex;
  gap:10px;
  padding:10px 12px;
}

.w3ChartWrap{
  border:1px solid rgba(148,163,184,.28);
  border-radius:16px;
  padding:12px;
  background:rgba(15,21,29,.68);
}

.w3CardArea{
  padding:10px;
}

.w3Card{
  border:1px solid rgba(148,163,184,.26);
  border-radius:14px;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:6px;
  background:rgba(18,26,34,.78);
}

.w3CardTitle{
  font-weight:800;
  letter-spacing:.04em;
  font-size:16px;
  color:rgba(241,245,249,.95);
}

.w3CardSub{
  font-size:12px;
  color:rgba(226,232,240,.78);
}

.w3Hint{
  padding:10px 12px;
  border:1px dashed rgba(148,163,184,.32);
  border-radius:12px;
  color:rgba(226,232,240,.78);
  background:rgba(15,21,29,.45);
}

.w3ListTitle{
  padding:10px 12px;
  border:1px solid rgba(148,163,184,.26);
  border-radius:14px;
  margin:12px 0 10px;
  font-weight:800;
  color:rgba(241,245,249,.92);
  background:rgba(15,21,29,.55);
}

.w3ChipRow{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.w3Chip{
  border:1px solid rgba(148,163,184,.26);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  color:rgba(241,245,249,.9);
  background:rgba(2,6,23,.25);
}

.w3Grid{
  width:100%;
}

.w3Left{
  min-width:0;
  min-height:0;
}

.w3Right{
  min-width:0;
  min-height:0;
  display:flex;
  flex-direction:column;
}

.w3AxisHint{
  margin:0 0 6px 0;
  font-size:12px;
  color:rgba(226,232,240,.82);
}

/* 縦長でも「カードだけスクロール」 */
.w3CardArea{
  min-height:0;
  overflow:auto;
}

/* クリックを通す（保険） */
.w3Focus canvas{
  pointer-events:auto;
}

/* =========================
   Widget③ Focus：グラフ潰れ対策
   ========================= */

/* focusPanel全体が高さを持つ前提。なければここで確保 */
.focusPanel.w3Focus{
  min-height: 0;
  height: 100%;
}

/* ツール列より下を“残り全部”使う */
.focusPanel.w3Focus .focusDonutGrid.w3Grid{
  min-height: 0;
  height: calc(100vh - 170px); /* ←ヘッダ+ツールの分。合わなければ 150〜200で微調整 */
  display: grid;
  grid-template-columns: minmax(0, 1fr) 420px; /* 右カード幅は固定 */
  gap: 14px;
  align-items: stretch;
}

/* 左：縦に伸びる */
.focusPanel.w3Focus .w3Left{
  min-height: 0;
  display: flex;
  flex-direction: column;
}

/* グラフ枠：高さを“必ず”確保（これが効く） */
.focusPanel.w3Focus .w3ChartWrap{
  flex: 1 1 auto;
  min-height: 340px;          /* 潰れない最低高さ */
  height: 100%;
}

/* canvasは親いっぱい */
.focusPanel.w3Focus .w3ChartWrap canvas{
  width: 100% !important;
  height: 100% !important;
  display: block;
}

/* 右：タイトル固定＋カードだけスクロール */
.focusPanel.w3Focus .w3Right{
  min-height: 0;
  display: flex;
  flex-direction: column;
}
.focusPanel.w3Focus .w3ListTitle{
  flex: 0 0 auto;
}
.focusPanel.w3Focus .w3CardArea{
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
}

