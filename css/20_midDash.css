/* Mid KPI（中段：2×2フィットの器 / 5枠目なし） */

.midKpiWrap{
  border:1px solid var(--border);
  background:rgba(18,26,34,.55);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  overflow:hidden;

  flex:1;
  min-height:0;
  display:flex;
  flex-direction:column;
}

.midTop{
  padding:14px;
  border-bottom:1px solid var(--border);

  flex:1;
  min-height:0;
  display:flex;
}

/* 2×2 の器 */
#midDash{
  width:100%;
  min-height:0;
  display:grid;
  gap:12px;

  grid-template-columns:repeat(2, minmax(0, 1fr));
  grid-template-rows:repeat(2, minmax(0, 1fr));
  align-items:stretch;
}

/* スロットがセルを埋める */
#midDash > *{
  min-width:0;
  min-height:0;
  height:100%;
}

/* スロット内カード（kpiMid.jsが生成する想定） */
#midDash .midPanel{
  height:100%;
  display:flex;
  flex-direction:column;
  min-height:0;
}

/* bodyは残り高さに追従 */
.midPanelBody{
  flex:1;
  min-height:0;
  padding:10px 12px 12px;
  height:auto !important;
  display:flex;
  gap:12px;
  align-items:stretch;
}

/* canvasは追従 */
.midPanelBody canvas{
  width:100% !important;
  height:100% !important;
  display:block;
}

/* ドーナツ左右割り（現状維持） */
.donutHost{
  flex:0 0 58%;
  min-width:0;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}
.donutMetaCompact{
  flex:1;
  min-width:0;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.donutMetaCompact .note{
  font-size:12px;
  color:var(--muted);
}

/* 狭幅は縦積み（ブレークポイントを下げる） */
@media (max-width:720px){
  #midDash{
    grid-template-columns:1fr;
    grid-template-rows:auto;
  }

  /* 縦積み時にカードが間延びしないように高さを戻す */
  .midPanelBody{
    height:260px;
  }
}

@media (max-width:560px){
  .midPanelBody{
    height:240px;
  }
}
/* ===== A: 空パネルを「クリック枠」として固定 ===== */
#midDash .dashPanel{
  border:1px solid var(--border);
  background:rgba(15,21,29,.55);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  overflow:hidden;

  cursor:pointer;
  user-select:none;
  transition: transform .08s ease, border-color .15s ease, background .15s ease;
}
#midDash .dashPanel:hover{
  border-color: rgba(109,211,251,.35);
  background: rgba(18,26,34,.55);
}
#midDash .dashPanel:active{
  transform: scale(.99);
}
