/* =========================================
   Widget①: Share Donut（2重ドーナツ）
   - 左：canvas
   - 右：凡例（色 + ラベル + 売上）
   ========================================= */

.widget1{
  height:100%;
  min-height:0;
  display:flex;
  flex-direction:column;

  border:1px solid rgba(148,163,184,.18);
  border-radius:16px;
  background:rgba(17,24,39,.72);
  box-shadow:0 10px 28px rgba(0,0,0,.35);
  overflow:hidden;
}

/* header（左：タイトル / 右：拡大 + select） */
.widget1Header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;

  padding:12px 12px 10px;
  border-bottom:1px solid rgba(148,163,184,.14);
  background:rgba(2,6,23,.25);
}

.widget1HeaderLeft{
  min-width:0;
  display:flex;
  align-items:center;
  gap:10px;
}

.widget1Title{
  font-weight:900;
  letter-spacing:.2px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.widget1HeaderRight{
  display:flex;
  align-items:center;
  gap:10px;
}

.widget1Select{
  background:rgba(15,23,42,.78);
  border:1px solid rgba(148,163,184,.25);
  color:var(--text,#e5e7eb);
  border-radius:10px;
  padding:8px 10px;
  font-weight:800;
  outline:none;
}
.widget1Select:focus{
  border-color: rgba(109,211,251,.45);
  box-shadow:0 0 0 3px rgba(109,211,251,.15);
}

/* body（左: chart / 右: list） */
.widget1Body{
  flex:1;
  min-height:0;
  display:grid;
  grid-template-columns:minmax(0, 1fr) 280px;
  gap:12px;
  padding:12px;
}

/* Chart area */
.widget1ChartWrap{
  min-height:0;
  display:flex;
  align-items:center;
  justify-content:center;

  border:1px solid rgba(148,163,184,.14);
  border-radius:14px;
  background:rgba(2,6,23,.22);
  padding:10px;
}

.widget1Canvas{
  width:100% !important;
  height:100% !important;
  display:block;
  max-height:320px; /* 通常カードでの上限 */
}

/* List area（右側） */
.widget1ABC{
  min-height:0;
  overflow:auto;

  border:1px solid rgba(148,163,184,.14);
  border-radius:14px;
  background:rgba(2,6,23,.22);
  padding:10px;

  display:flex;
  flex-direction:column;
  gap:8px;
}

/* 右の1行（凡例） */
.widget1Row{
  display:grid;
  grid-template-columns:12px 1fr auto;
  gap:10px;
  align-items:center;

  padding:9px 10px;
  border-radius:12px;

  background:rgba(15,23,42,.45);
  border:1px solid rgba(148,163,184,.14);
}
.widget1Row:hover{
  border-color: rgba(109,211,251,.35);
  background:rgba(15,23,42,.60);
}

.w1chip{
  width:12px;
  height:12px;
  border-radius:4px;
  box-shadow:0 0 0 2px rgba(0,0,0,.18) inset;
}

.widget1Row > span:nth-child(2){
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.widget1Row > span:nth-child(3){
  font-weight:900;
  opacity:.95;
  white-space:nowrap;
}

/* =========================================================
   Phase1 追加：右側凡例を「判断ブロック」にする（非破壊）
   - renderLegend_ が .w1Legend* を出す想定
   - 既存 .widget1Row は残す（他で使っても壊れない）
   ========================================================= */

/* スクロールは既に widget1ABC にあるので、ここは追加の微調整のみ */
.widget1ABC{
  padding-right:8px; /* スクロールバーと干渉しにくく */
}

/* 1カテゴリ=1ブロック */
.w1LegendItem{
  border:1px solid rgba(148,163,184,.14);
  background:rgba(15,23,42,.45);
  border-radius:12px;
  padding:10px 10px;
}
.w1LegendItem:hover{
  border-color: rgba(109,211,251,.35);
  background:rgba(15,23,42,.60);
}

/* head: ■ + name */
.w1LegendHead{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:6px;
}
.w1LegendSwatch{
  width:12px;
  height:12px;
  border-radius:2px; /* ■ */
  flex:0 0 auto;
  box-shadow:0 0 0 2px rgba(0,0,0,.18) inset;
}
.w1LegendLabel{
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* 売上（大） */
.w1LegendSales{
  font-size:18px;
  font-weight:900;
  letter-spacing:.2px;
  margin:2px 0 6px 0;
  white-space:nowrap;
}

/* 構成比行 */
.w1LegendShares{
  color:rgba(148,163,184,.92);
  font-size:12px;
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  align-items:center;
  margin-bottom:8px;
}
.w1LegendShareSep{
  opacity:.65;
}

/* 小指標 */
.w1LegendMeta{
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:12px;
}
.w1LegendMetaRow{
  display:flex;
  justify-content:space-between;
  gap:10px;
}
.w1LegendMetaRow .k{
  color:rgba(148,163,184,.92);
  white-space:nowrap;
}
.w1LegendMetaRow .v{
  font-weight:900;
  white-space:nowrap;
}

/* widget1Note は既存のまま使う前提（無ければ追加で） */
.widget1Note{
  margin-top:6px;
  color:rgba(148,163,184,.92);
  font-size:12px;
  line-height:1.35;
}

/* =========================================================
   互換（保険）：古いクラス名が残ってても最低限崩れない
   - widget1ABCRow / label / value がもし出ても見た目が破綻しない
   ========================================================= */
.widget1ABCRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;

  padding:9px 10px;
  border-radius:12px;
  background:rgba(15,23,42,.45);
  border:1px solid rgba(148,163,184,.14);
}
.widget1ABCRow:hover{
  border-color: rgba(109,211,251,.35);
  background:rgba(15,23,42,.60);
}
.widget1ABCRow .label{
  min-width:0;
  display:flex;
  align-items:center;
  gap:8px;
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.widget1ABCRow .value{
  font-weight:900;
  opacity:.95;
  white-space:nowrap;
}

/* responsive */
@media (max-width: 980px){
  .widget1Body{
    grid-template-columns:1fr;
  }
  .widget1Canvas{
    max-height:280px;
  }
  .widget1ABC{
    max-height:220px;
  }
}

/* ===== Phase2: ドーナツ中央表示（合計売上） ===== */
.widget1ChartWrap{
  position:relative; /* 追加：中央表示を重ねるため */
}

.w1Center{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  pointer-events:none; /* チャート操作を邪魔しない */
  transform: translateY(2px);
}

.w1CenterLabel{
  font-size:12px;
  font-weight:900;
  color:rgba(148,163,184,.92);
  letter-spacing:.2px;
}

.w1CenterValue{
  margin-top:4px;
  font-size:22px;
  font-weight:900;
  letter-spacing:.2px;
  color:var(--text,#e5e7eb);
  text-shadow:0 6px 18px rgba(0,0,0,.35);
}
