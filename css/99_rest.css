/* =================================================
   99_rest.css
   ─ 分割対象外の残り全部
   ================================================= */


/* =========================
   Topbar
   ========================= */

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  border:1px solid var(--border);
  background:rgba(18,26,34,.75);
  backdrop-filter: blur(10px);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  position:sticky;
  top:10px;
  z-index:10;
}

.topbar .left{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:220px;
}

.brand{
  font-weight:800;
  letter-spacing:.4px;
}

.badge{
  font-size:12px;
  color:var(--muted);
  border:1px solid var(--border);
  padding:4px 8px;
  border-radius:999px;
  background:rgba(15,21,29,.7);
}

.topbar .right{
  display:flex;
  align-items:center;
  gap:10px;
}


/* =========================
   KPI Top
   ========================= */

.kpiTop{
  margin-top:14px;
  display:grid;
  gap:12px;
  grid-template-columns:repeat(4, minmax(0,1fr));
}

.kpiCard{
  padding:14px 14px 12px;
  min-height:88px;
}

.kpiTitle{
  font-size:12px;
  color:var(--muted);
}

.kpiValue{
  margin-top:8px;
  font-size:24px;
  font-weight:850;
}

.kpiSub{
  margin-top:6px;
  font-size:12px;
  color:var(--muted);
}


/* =========================
   Mid Cards（下段カード）
   ========================= */

.midCardsMount{
  padding:12px 14px 14px;
}

.midCards{
  display:grid;
  gap:12px;
  grid-template-columns:repeat(3, minmax(0,1fr));
}

.genreCard{
  padding:14px;
  cursor:pointer;
  transition:
    transform .08s ease,
    border-color .15s ease,
    background .15s ease,
    opacity .15s ease;
  background: rgba(15,21,29,.55);
  border: 1px solid var(--border);
  border-radius: var(--r);
}

.genreCard:hover{
  border-color: rgba(109,211,251,.35);
}

.genreCard:active{
  transform: scale(.99);
}

.genreCard.dim{
  opacity:.35;
}

.genreCard.focus{
  border-color: rgba(109,211,251,.65);
  background: rgba(109,211,251,.08);
}

.genreCard.open{
  border-color: rgba(126,224,129,.65);
  background: rgba(126,224,129,.07);
}


/* =========================
   Detail / Table
   ========================= */

.detailArea{
  margin-top:12px;
  border:1px solid var(--border);
  background:rgba(18,26,34,.7);
  border-radius:var(--r);
  box-shadow:var(--shadow);
}

.detailHeader{
  padding:12px 14px;
  border-bottom:1px solid var(--border);
}

.detailTitle{
  font-size:14px;
  font-weight:900;
}

.detailBody{
  padding:12px 14px 14px;
}


/* =========================
   Drawer
   ========================= */

.drawerOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(3px);
  display:none;
  z-index:50;
}

.drawerOverlay.open{
  display:block;
}

.drawer{
  position:fixed;
  top:0;
  right:0;
  height:100%;
  width:min(420px,92vw);
  background:rgba(15,21,29,.92);
  border-left:1px solid var(--border);
  transform:translateX(102%);
  transition:.18s ease;
  z-index:60;
}

.drawer.open{
  transform:translateX(0);
}


/* =========================
   Cost rate gradient
   ========================= */

.costRate{
  font-weight:900;
  --t: clamp(0, calc((var(--cost-rate) - 0.25) / 0.10), 1);
  color: color-mix(
    in srgb,
    color-mix(
      in srgb,
      var(--accent) calc((1 - min(var(--t), .5) * 2) * 100%),
      var(--text)   calc(min(var(--t), .5) * 2 * 100%)
    ),
    var(--danger) calc(max(var(--t) - .5, 0) * 2 * 100%)
  );
}


/* =========================
   Responsive（残り物）
   ========================= */

@media (max-width:980px){
  .kpiTop{
    grid-template-columns:repeat(2,1fr);
  }

  .midCards{
    grid-template-columns:repeat(2,1fr);
  }
}

@media (max-width:560px){
  .midCards{
    grid-template-columns:1fr;
  }
}
